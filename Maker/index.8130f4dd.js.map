{"mappings":"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","sources":["src/dynamic_adapt.js"],"sourcesContent":["// Dynamic Adapt v.1\r\n// HTML data-da=\"where(uniq class name),when(breakpoint),position(digi)\"\r\n// e.x. data-da=\".item,992,2\"\r\n// Andrikanych Yevhen 2020\r\n// https://www.youtube.com/c/freelancerlifestyle\r\n\r\n\"use strict\";\r\nfunction DynamicAdapt(type) {\r\n\tthis.type = type;\r\n}\r\nDynamicAdapt.prototype.init = function () {\r\n\tconst _this = this;\r\n\t// массив объектов\r\n\tthis.оbjects = [];\r\n\tthis.daClassname = \"_dynamic_adapt_\";\r\n\t// массив DOM-элементов\r\n\tthis.nodes = document.querySelectorAll(\"[data-da]\");\r\n\t// наполнение оbjects объктами\r\n\tfor (let i = 0; i < this.nodes.length; i++) {\r\n\t\tconst node = this.nodes[i];\r\n\t\tconst data = node.dataset.da.trim();\r\n\t\tconst dataArray = data.split(\",\");\r\n\t\tconst оbject = {};\r\n\t\tоbject.element = node;\r\n\t\tоbject.parent = node.parentNode;\r\n\t\tоbject.destination = document.querySelector(dataArray[0].trim());\r\n\t\tоbject.breakpoint = dataArray[1] ? dataArray[1].trim() : \"767\";\r\n\t\tоbject.place = dataArray[2] ? dataArray[2].trim() : \"last\";\r\n\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n\t\tthis.оbjects.push(оbject);\r\n\t}\r\n\tthis.arraySort(this.оbjects);\r\n\t// массив уникальных медиа-запросов\r\n\tthis.mediaQueries = Array.prototype.map.call(this.оbjects, function (item) {\r\n\t\treturn '(' + this.type + \"-width: \" + item.breakpoint + \"px),\" + item.breakpoint;\r\n\t}, this);\r\n\tthis.mediaQueries = Array.prototype.filter.call(this.mediaQueries, function (item, index, self) {\r\n\t\treturn Array.prototype.indexOf.call(self, item) === index;\r\n\t});\r\n\t// навешивание слушателя на медиа-запрос\r\n\t// и вызов обработчика при первом запуске\r\n\tfor (let i = 0; i < this.mediaQueries.length; i++) {\r\n\t\tconst media = this.mediaQueries[i];\r\n\t\tconst mediaSplit = String.prototype.split.call(media, ',');\r\n\t\tconst matchMedia = window.matchMedia(mediaSplit[0]);\r\n\t\tconst mediaBreakpoint = mediaSplit[1];\r\n\t\t// массив объектов с подходящим брейкпоинтом\r\n\t\tconst оbjectsFilter = Array.prototype.filter.call(this.оbjects, function (item) {\r\n\t\t\treturn item.breakpoint === mediaBreakpoint;\r\n\t\t});\r\n\t\tmatchMedia.addListener(function () {\r\n\t\t\t_this.mediaHandler(matchMedia, оbjectsFilter);\r\n\t\t});\r\n\t\tthis.mediaHandler(matchMedia, оbjectsFilter);\r\n\t}\r\n};\r\nDynamicAdapt.prototype.mediaHandler = function (matchMedia, оbjects) {\r\n\tif (matchMedia.matches) {\r\n\t\tfor (let i = 0; i < оbjects.length; i++) {\r\n\t\t\tconst оbject = оbjects[i];\r\n\t\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n\t\t\tthis.moveTo(оbject.place, оbject.element, оbject.destination);\r\n\t\t}\r\n\t} else {\r\n\t\t//for (let i = 0; i < оbjects.length; i++) {\r\n\t\tfor (let i = оbjects.length - 1; i >= 0; i--) {\r\n\t\t\tconst оbject = оbjects[i];\r\n\t\t\tif (оbject.element.classList.contains(this.daClassname)) {\r\n\t\t\t\tthis.moveBack(оbject.parent, оbject.element, оbject.index);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n// Функция перемещения\r\nDynamicAdapt.prototype.moveTo = function (place, element, destination) {\r\n\telement.classList.add(this.daClassname);\r\n\tif (place === 'last' || place >= destination.children.length) {\r\n\t\tdestination.insertAdjacentElement('beforeend', element);\r\n\t\treturn;\r\n\t}\r\n\tif (place === 'first') {\r\n\t\tdestination.insertAdjacentElement('afterbegin', element);\r\n\t\treturn;\r\n\t}\r\n\tdestination.children[place].insertAdjacentElement('beforebegin', element);\r\n}\r\n// Функция возврата\r\nDynamicAdapt.prototype.moveBack = function (parent, element, index) {\r\n\telement.classList.remove(this.daClassname);\r\n\tif (parent.children[index] !== undefined) {\r\n\t\tparent.children[index].insertAdjacentElement('beforebegin', element);\r\n\t} else {\r\n\t\tparent.insertAdjacentElement('beforeend', element);\r\n\t}\r\n}\r\n// Функция получения индекса внутри родителя\r\nDynamicAdapt.prototype.indexInParent = function (parent, element) {\r\n\tconst array = Array.prototype.slice.call(parent.children);\r\n\treturn Array.prototype.indexOf.call(array, element);\r\n};\r\n// Функция сортировки массива по breakpoint и place \r\n// по возрастанию для this.type = min\r\n// по убыванию для this.type = max\r\nDynamicAdapt.prototype.arraySort = function (arr) {\r\n\tif (this.type === \"min\") {\r\n\t\tArray.prototype.sort.call(arr, function (a, b) {\r\n\t\t\tif (a.breakpoint === b.breakpoint) {\r\n\t\t\t\tif (a.place === b.place) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn a.place - b.place;\r\n\t\t\t}\r\n\r\n\t\t\treturn a.breakpoint - b.breakpoint;\r\n\t\t});\r\n\t} else {\r\n\t\tArray.prototype.sort.call(arr, function (a, b) {\r\n\t\t\tif (a.breakpoint === b.breakpoint) {\r\n\t\t\t\tif (a.place === b.place) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn b.place - a.place;\r\n\t\t\t}\r\n\r\n\t\t\treturn b.breakpoint - a.breakpoint;\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n};\r\nconst da = new DynamicAdapt(\"max\");\r\nda.init();"],"names":["$ff15d33eac77ee7a$var$DynamicAdapt","type","this","prototype","init","media","_this","mediaQueries","i1","mediaSplit","String","split","call","matchMedia","window","mediaBreakpoint","Array","filter","item","breakpoint","addListener","_this1","mediaHandler","daClassname","nodes","document","querySelectorAll","i","length","node","dataArray","dataset","da","trim","element","parent","parentNode","destination","querySelector","place","index","indexInParent","push","arraySort","map","self","indexOf","i11","_loop","matches","moveTo","i2","classList","contains","moveBack","add","children","insertAdjacentElement","remove","undefined","array","slice","arr","sort","a","b"],"version":3,"file":"index.8130f4dd.js.map"}