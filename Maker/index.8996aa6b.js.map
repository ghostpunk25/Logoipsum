{"mappings":"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","sources":["src/dynamic_adapt.js"],"sourcesContent":["// Dynamic Adapt v.1\r\n// HTML data-da=\"where(uniq class name),when(breakpoint),position(digi)\"\r\n// e.x. data-da=\".item,992,2\"\r\n// Andrikanych Yevhen 2020\r\n// https://www.youtube.com/c/freelancerlifestyle\r\n\r\n\"use strict\";\r\nfunction DynamicAdapt(type) {\r\n\tthis.type = type;\r\n}\r\nDynamicAdapt.prototype.init = function () {\r\n\tconst _this = this;\r\n\t// массив объектов\r\n\tthis.оbjects = [];\r\n\tthis.daClassname = \"_dynamic_adapt_\";\r\n\t// массив DOM-элементов\r\n\tthis.nodes = document.querySelectorAll(\"[data-da]\");\r\n\t// наполнение оbjects объктами\r\n\tfor (let i = 0; i < this.nodes.length; i++) {\r\n\t\tconst node = this.nodes[i];\r\n\t\tconst data = node.dataset.da.trim();\r\n\t\tconst dataArray = data.split(\",\");\r\n\t\tconst оbject = {};\r\n\t\tоbject.element = node;\r\n\t\tоbject.parent = node.parentNode;\r\n\t\tоbject.destination = document.querySelector(dataArray[0].trim());\r\n\t\tоbject.breakpoint = dataArray[1] ? dataArray[1].trim() : \"767\";\r\n\t\tоbject.place = dataArray[2] ? dataArray[2].trim() : \"last\";\r\n\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n\t\tthis.оbjects.push(оbject);\r\n\t}\r\n\tthis.arraySort(this.оbjects);\r\n\t// массив уникальных медиа-запросов\r\n\tthis.mediaQueries = Array.prototype.map.call(this.оbjects, function (item) {\r\n\t\treturn '(' + this.type + \"-width: \" + item.breakpoint + \"px),\" + item.breakpoint;\r\n\t}, this);\r\n\tthis.mediaQueries = Array.prototype.filter.call(this.mediaQueries, function (item, index, self) {\r\n\t\treturn Array.prototype.indexOf.call(self, item) === index;\r\n\t});\r\n\t// навешивание слушателя на медиа-запрос\r\n\t// и вызов обработчика при первом запуске\r\n\tfor (let i = 0; i < this.mediaQueries.length; i++) {\r\n\t\tconst media = this.mediaQueries[i];\r\n\t\tconst mediaSplit = String.prototype.split.call(media, ',');\r\n\t\tconst matchMedia = window.matchMedia(mediaSplit[0]);\r\n\t\tconst mediaBreakpoint = mediaSplit[1];\r\n\t\t// массив объектов с подходящим брейкпоинтом\r\n\t\tconst оbjectsFilter = Array.prototype.filter.call(this.оbjects, function (item) {\r\n\t\t\treturn item.breakpoint === mediaBreakpoint;\r\n\t\t});\r\n\t\tmatchMedia.addListener(function () {\r\n\t\t\t_this.mediaHandler(matchMedia, оbjectsFilter);\r\n\t\t});\r\n\t\tthis.mediaHandler(matchMedia, оbjectsFilter);\r\n\t}\r\n};\r\nDynamicAdapt.prototype.mediaHandler = function (matchMedia, оbjects) {\r\n\tif (matchMedia.matches) {\r\n\t\tfor (let i = 0; i < оbjects.length; i++) {\r\n\t\t\tconst оbject = оbjects[i];\r\n\t\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n\t\t\tthis.moveTo(оbject.place, оbject.element, оbject.destination);\r\n\t\t}\r\n\t} else {\r\n\t\t//for (let i = 0; i < оbjects.length; i++) {\r\n\t\tfor (let i = оbjects.length - 1; i >= 0; i--) {\r\n\t\t\tconst оbject = оbjects[i];\r\n\t\t\tif (оbject.element.classList.contains(this.daClassname)) {\r\n\t\t\t\tthis.moveBack(оbject.parent, оbject.element, оbject.index);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n// Функция перемещения\r\nDynamicAdapt.prototype.moveTo = function (place, element, destination) {\r\n\telement.classList.add(this.daClassname);\r\n\tif (place === 'last' || place >= destination.children.length) {\r\n\t\tdestination.insertAdjacentElement('beforeend', element);\r\n\t\treturn;\r\n\t}\r\n\tif (place === 'first') {\r\n\t\tdestination.insertAdjacentElement('afterbegin', element);\r\n\t\treturn;\r\n\t}\r\n\tdestination.children[place].insertAdjacentElement('beforebegin', element);\r\n}\r\n// Функция возврата\r\nDynamicAdapt.prototype.moveBack = function (parent, element, index) {\r\n\telement.classList.remove(this.daClassname);\r\n\tif (parent.children[index] !== undefined) {\r\n\t\tparent.children[index].insertAdjacentElement('beforebegin', element);\r\n\t} else {\r\n\t\tparent.insertAdjacentElement('beforeend', element);\r\n\t}\r\n}\r\n// Функция получения индекса внутри родителя\r\nDynamicAdapt.prototype.indexInParent = function (parent, element) {\r\n\tconst array = Array.prototype.slice.call(parent.children);\r\n\treturn Array.prototype.indexOf.call(array, element);\r\n};\r\n// Функция сортировки массива по breakpoint и place \r\n// по возрастанию для this.type = min\r\n// по убыванию для this.type = max\r\nDynamicAdapt.prototype.arraySort = function (arr) {\r\n\tif (this.type === \"min\") {\r\n\t\tArray.prototype.sort.call(arr, function (a, b) {\r\n\t\t\tif (a.breakpoint === b.breakpoint) {\r\n\t\t\t\tif (a.place === b.place) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn a.place - b.place;\r\n\t\t\t}\r\n\r\n\t\t\treturn a.breakpoint - b.breakpoint;\r\n\t\t});\r\n\t} else {\r\n\t\tArray.prototype.sort.call(arr, function (a, b) {\r\n\t\t\tif (a.breakpoint === b.breakpoint) {\r\n\t\t\t\tif (a.place === b.place) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn b.place - a.place;\r\n\t\t\t}\r\n\r\n\t\t\treturn b.breakpoint - a.breakpoint;\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n};\r\nconst da = new DynamicAdapt(\"max\");\r\nda.init();"],"names":["$7cfc0597598e3614$var$DynamicAdapt","type","this","prototype","init","_this","daClassname","nodes","document","querySelectorAll","i","length","node","dataArray","dataset","da","trim","split","element","parent","parentNode","destination","querySelector","breakpoint","place","index","indexInParent","push","arraySort","mediaQueries","Array","map","call","item","filter","self","indexOf","i1","media","mediaSplit","String","matchMedia","window","mediaBreakpoint","addListener","mediaHandler","matches","moveTo","i2","classList","contains","moveBack","add","children","insertAdjacentElement","remove","undefined","array","slice","arr","sort","a","b"],"version":3,"file":"index.8996aa6b.js.map"}